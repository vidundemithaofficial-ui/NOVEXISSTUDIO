<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nayani & Supun | The Wedding Editorial</title>

    <!-- Icons & Fonts -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700;800;900&family=Lato:wght@100;300;400;700&family=Pinyon+Script&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400&display=swap"
        rel="stylesheet">

    <!-- GSAP for Animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <style>
        /* --- ULTRA-LUXURY EDITORIAL THEME --- */
        :root {
            --font-display: 'Cinzel', serif;
            --font-body: 'Lato', sans-serif;
            --font-script: 'Pinyon Script', cursive;
            --font-serif: 'Cormorant Garamond', serif;

            --color-bg: #F9F7F2;
            /* Cream Pearl */
            --color-emerald: #0A2A1A;
            /* Deep Royal Emerald */
            --color-gold: #C5A059;
            /* Antique Gold */
            --color-gold-light: #E0C58E;
            --color-text: #1A1A1A;
            --color-white: #FFFFFF;

            --spacing-lg: 10rem;
            --spacing-md: 5rem;
            --spacing-sm: 2.5rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: initial;
        }

        /* GSAP handles smooth scroll better */

        body {
            background-color: var(--color-bg);
            color: var(--color-text);
            font-family: var(--font-body);
            overflow-x: hidden;
            line-height: 1.6;
        }

        body.locked {
            overflow: hidden;
            height: 100vh;
        }

        /* --- UTILITIES --- */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--spacing-sm);
        }

        .reveal {
            opacity: 0;
        }

        .lux-border {
            border: 1px solid var(--color-gold);
            padding: 2rem;
            position: relative;
        }

        /* --- MAJESTIC INVITATION & COOL COUNTDOWN CSS --- */
        .majestic-invite-section {
            padding: var(--spacing-lg) var(--spacing-sm);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(rgba(249, 247, 242, 0.8), rgba(249, 247, 242, 0.8)), url('imgi_9_1I2A9874.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            position: relative;
        }

        .majestic-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4rem;
            max-width: 1400px;
            width: 100%;
            margin: 0 auto;
        }

        .majestic-premium-text {
            flex: 1;
            max-width: 400px;
            text-align: left;
        }

        .majestic-premium-text h2 {
            font-family: var(--font-serif);
            font-size: clamp(2.5rem, 5vw, 4rem);
            line-height: 1.1;
            color: var(--color-emerald);
            margin-bottom: 2rem;
        }

        .majestic-premium-text p {
            font-family: var(--font-body);
            font-size: 1.1rem;
            line-height: 1.8;
            color: rgba(5, 20, 13, 0.7);
            letter-spacing: 1px;
        }

        .majestic-card {
            flex: 1.5;
            max-width: 700px;
            width: 100%;
            text-align: center;
            border: 1px solid var(--color-gold-light);
            box-shadow: 0 40px 80px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 2;
            overflow: hidden;
            background: white;
        }

        .majestic-card img {
            width: 100%;
            height: auto;
            display: block;
        }

        @media (max-width: 1100px) {
            .majestic-container {
                flex-direction: column;
                gap: 3rem;
                padding: 0 2rem;
            }

            .majestic-premium-text {
                max-width: 100%;
                text-align: center;
            }
        }

        .majestic-card::before {
            content: "";
            position: absolute;
            top: 12px;
            left: 12px;
            right: 12px;
            bottom: 12px;
            border: 1px solid var(--color-gold);
            pointer-events: none;
        }

        .majestic-label {
            font-family: var(--font-body);
            text-transform: uppercase;
            letter-spacing: 4px;
            color: var(--color-gold);
            font-size: 0.8rem;
            margin-bottom: 2rem;
            display: block;
        }

        .majestic-display {
            font-family: var(--font-display);
            font-size: 3rem;
            color: var(--color-emerald);
            margin-bottom: 2rem;
            line-height: 1.3;
        }

        .majestic-script {
            font-family: var(--font-script);
            font-size: 3.5rem;
            color: var(--color-gold);
            display: block;
            margin: 1rem 0;
            line-height: 1;
        }

        .majestic-text {
            font-family: var(--font-serif);
            font-size: 1.25rem;
            color: #4a4a4a;
            margin-bottom: 3rem;
            line-height: 1.8;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* COOL COUNTDOWN SECTION */
        .cool-countdown-section {
            background-color: var(--color-emerald);
            color: var(--color-white);
            padding: 6rem 0;
            position: relative;
            overflow: hidden;
            text-align: center;
            border-top: 4px solid var(--color-gold);
            border-bottom: 4px solid var(--color-gold);
        }

        .cool-countdown-grid {
            display: flex;
            justify-content: center;
            gap: 4rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .cool-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .cool-val {
            font-family: var(--font-display);
            font-size: clamp(3rem, 8vw, 6rem);
            color: #F9F7F2 !important;
            /* Force Cream Ivory for visibility */
            line-height: 1;
            margin-bottom: 0.5rem;
            text-shadow: 0 4px 30px rgba(197, 160, 89, 0.4);
        }

        .cool-label {
            font-family: var(--font-body);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 4px;
            opacity: 0.8;
        }

        .cool-btn {
            background: transparent;
            border: 1px solid var(--color-gold);
            color: var(--color-gold);
            padding: 1rem 2.5rem;
            font-family: var(--font-display);
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .cool-btn:hover {
            background: var(--color-gold);
            color: var(--color-emerald);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 768px) {
            .majestic-display {
                font-size: 2rem;
            }

            .majestic-script {
                font-size: 2.5rem;
            }

            .majestic-card {
                padding: 3rem 1.5rem;
            }

            .cool-val {
                font-size: 3rem;
            }

            .cool-countdown-grid {
                gap: 2rem;
            }
        }

        /* --- NEW ENVELOPE STYLES --- */
        :root {
            --envelope-x: 85vw;
            --envelope-y: 56.6vw;
            /* 3:2 ratio */
            --envelope-bg: Moccasin;
            --envelope-shadow: Peru;
            --letter-x: 75vw;
            --letter-y: 50vw;
            --letter-bg: AntiqueWhite;
            --letter-shadow: BurlyWood;
            --letter-text: #180d07;
            --letter-font: "Cinzel", serif;
            --letter-button-text: darkred;
            --heart-bg: darkred;
            --heart-text: white;
        }

        @media (min-width: 650px) {
            :root {
                --envelope-x: 600px;
                --envelope-y: 400px;
                --letter-x: 500px;
                --letter-y: 380px;
            }
        }

        .cssletter {
            position: fixed;
            /* Changed to fixed to overlay */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            background-color: #05140D;
            /* Match site theme or keep darkred from dist? kept site theme */
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
            -webkit-user-select: none;
            margin: 0;
            /* Changed from 24dvh 0 */
        }

        .envelope {
            position: relative;
            width: var(--envelope-x);
            height: var(--envelope-y);
            background: var(--envelope-bg);
            box-shadow: inset 0 0 30px -5px var(--envelope-shadow), 0 0 50vw 0 #05140D;
            /* Adjusted shadow color */
        }

        .envelope::before {
            content: "˚ʚ❤︎ɞ˚";
            font-size: 5rem;
            color: white;
            position: absolute;
            left: 50%;
            top: 30%;
            transform: translate(-50%, -50%);
            mix-blend-mode: soft-light;
        }

        .envelope-flap {
            width: 100%;
            height: 71%;
            position: absolute;
            top: 0;
            z-index: 3;
            overflow: hidden;
            transition: 0.6s linear all;
            transform-origin: top;
            pointer-events: all;
        }

        .envelope-folds {
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 2;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
        }

        .envelope-flap::before,
        .envelope-left::before,
        .envelope-right::before,
        .envelope-bottom::before {
            content: "";
            transform: rotate(45deg);
            background: var(--envelope-bg);
            box-shadow: 0 0 30px -5px var(--envelope-shadow);
            width: 100%;
            aspect-ratio: 1;
            display: block;
            position: absolute;
            top: 60%;
        }

        .envelope-flap::before {
            border-radius: 5rem;
            bottom: 30px;
            border-radius: 5rem;
            top: auto;
        }

        @media (min-width: 650px) {
            .envelope-flap::before {
                bottom: 100px;
            }
        }

        .envelope-left::before {
            top: 10%;
            left: -65%;
        }

        .envelope-right::before {
            top: 10%;
            right: -65%;
        }

        .envelope-bottom::before {
            top: 60%;
            border-radius: 5rem;
        }

        .heart {
            z-index: 4;
            position: relative;
            box-shadow: none;
            border: none;
            width: 70px;
            aspect-ratio: 1;
            background: radial-gradient(circle at 60% 65%, var(--heart-bg) 64%, #0000 65%) top left/50% 50%, radial-gradient(circle at 40% 65%, var(--heart-bg) 64%, #0000 65%) top right/50% 50%, conic-gradient(from -45deg at 50% 85.5%, var(--heart-bg) 90deg, #0000 0) bottom/100% 50%;
            background-repeat: no-repeat;
            left: 50%;
            top: 70%;
            transform: translate(-50%, -50%);
            cursor: pointer;
        }

        @media (min-width: 650px) {
            .heart {
                width: 150px;
            }
        }

        .heart::before {
            content: "";
            display: block;
            position: absolute;
            width: 70px;
            aspect-ratio: 1;
            background: radial-gradient(circle at 60% 65%, #ffffff26 64%, #0000 65%) top left/50% 50%, radial-gradient(circle at 40% 65%, #ffffff26 64%, #0000 65%) top right/50% 50%, conic-gradient(from -45deg at 50% 85.5%, #ffffff26 90deg, #0000 0) bottom/100% 50%;
            background-repeat: no-repeat;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%) scale(0);
            transition: 0.3s ease all;
            z-index: -1;
        }

        @media (min-width: 650px) {
            .heart::before {
                width: 150px;
            }
        }

        .heart:hover,
        .heart:active,
        .heart:focus {
            transform: translate(-50%, -50%);
            background-color: transparent;
            color: var(--heart-text);
        }

        .heart:hover::before,
        .heart:active::before,
        .heart:focus::before {
            transform: translate(-50%, -50%) scale(0.8);
        }

        .heart-text {
            transform: translateY(-10px);
            display: block;
            color: var(--heart-text);
            font-size: 1.5rem;
            font-family: var(--letter-font);
        }

        /* .envelope.active * {
            pointer-events: none;
        } REMOVED TO FIX DRAG */

        .envelope.active .envelope-flap {
            transform: rotateX(-180deg) translateY(0);
            perspective: 10px;
            pointer-events: none;
        }

        .envelope.active .envelope-flap::before {
            box-shadow: inset 0 0 30px -5px var(--envelope-shadow);
        }

        .envelope.active .heart {
            display: none;
        }

        .letter {
            box-sizing: border-box;
            font-family: var(--letter-font);
            font-size: clamp(0.8rem, 3.5vw, 1.3rem);
            line-height: 1.2;
            background-color: var(--letter-bg);
            color: var(--letter-text);
            width: var(--letter-x);
            height: var(--letter-y);
            user-select: none;
            box-shadow: inset 0 0 20px -5px var(--letter-shadow);
            padding: 2.5rem 1rem 1rem;
            margin: 0;
            cursor: grab;
            position: absolute;
            top: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            text-align: center;
            border: 0;
            transition: top 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 1;
            left: 50%;
            transform: translateX(-50%);
            will-change: transform, top;
        }

        .letter.dragging {
            transition: none !important;
            will-change: transform;
        }

        .letter.no-padding {
            padding: 0;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .letter.no-padding img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .envelope.active .letter {
            top: 4%;
            /* Adjust if it needs to slide up slightly like the original */
        }

        .letter:active {
            cursor: grabbing;
        }

        .letter.center {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .letter cite {
            font-size: 1.25rem;
            color: var(--letter-text);
            margin-top: 1rem;
        }

        .letter cite::before {
            content: none;
        }

        .letter:nth-child(even) {
            transform: translateX(-50%) skew(-2deg) translateY(-4px);
        }

        .letter:nth-child(odd) {
            transform: translateX(-50%) skew(2deg) translateY(4px);
        }

        @media (min-width: 650px) {
            .letter {
                font-size: 1.3rem;
            }
        }

        .closeLetter {
            font-size: 0 !important;
            position: absolute;
            top: 1rem;
            left: 50%;
            transform: translateX(-50%);
            background: none;
            box-shadow: none;
            padding: 0;
            border: 0;
            cursor: pointer;
        }

        .closeLetter::before {
            content: "˚ʚ❤︎ɞ˚";
            font-size: 1.5rem !important;
            font-family: var(--letter-font);
            color: var(--letter-button-text);
            text-align: center;
        }

        .closeLetter:hover,
        .closeLetter:active,
        .closeLetter:focus {
            background-color: transparent;
            color: var(--letter-text);
            transform: translateX(-50%);
            padding: 0;
            margin: 0;
        }

        .closeLetter:hover::before,
        .closeLetter:active::before,
        .closeLetter:focus::before {
            content: "xXx";
        }

        .letters {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease-in-out;
            z-index: auto;
            /* Remove stacking context so individual letters can jump to front */
            /* Behind folds but in front of background */
        }

        .letters.visible {
            opacity: 1;
            pointer-events: all;
        }

        .enter-site-btn {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100000;
            opacity: 0;
            pointer-events: none;
            transition: all 0.5s ease-in-out;
            background: var(--color-gold);
            color: var(--color-emerald);
            border: 2px solid var(--color-gold-light);
            padding: 1.2rem 3rem;
            font-family: var(--font-display);
            font-weight: 800;
            letter-spacing: 4px;
            text-transform: uppercase;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            border-radius: 50px;
            /* More like a 'hard' prominent button */
            cursor: pointer;
        }

        .enter-site-btn:hover {
            background: var(--color-white);
            transform: translateX(-50%) translateY(-5px);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.6);
        }

        .enter-site-btn.visible {
            opacity: 1;
            pointer-events: all;
        }

        /* --- NAVIGATION --- */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 2rem 4rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1001;
            transition: all 0.5s ease;
        }

        header.scrolled {
            background: rgba(249, 247, 242, 0.95);
            padding: 1.2rem 4rem;
            backdrop-filter: blur(10px);
        }

        .logo {
            font-family: var(--font-display);
            font-size: 1.2rem;
            letter-spacing: 4px;
            color: var(--color-white);
            transition: color 0.5s;
        }

        header.scrolled .logo {
            color: var(--color-emerald);
        }

        .nav-trigger span {
            width: 30px;
            height: 2px;
            background: var(--color-white);
            transition: all 0.3s;
            pointer-events: none;
        }

        header.scrolled .nav-trigger span {
            background: var(--color-emerald);
        }

        .nav-trigger:hover span:nth-child(1) {
            transform: translateY(-2px);
        }

        .nav-trigger:hover span:nth-child(2) {
            transform: translateY(2px);
        }

        .nav-trigger {
            background: none;
            border: none;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        /* --- NAVIGATION OVERLAY --- */
        .nav-overlay {
            position: fixed;
            inset: 0;
            background: var(--color-emerald);
            z-index: 1002;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: all 0.6s cubic-bezier(0.77, 0, 0.175, 1);
        }

        .nav-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .nav-list {
            list-style: none;
            text-align: center;
        }

        .nav-list li {
            margin: 2rem 0;
            overflow: hidden;
        }

        .nav-list a {
            font-family: var(--font-display);
            font-size: 2.5rem;
            color: var(--color-gold);
            text-decoration: none;
            display: block;
            transform: translateY(100%);
            transition: 0.6s;
        }

        .nav-overlay.active .nav-list a {
            transform: translateY(0);
        }

        .nav-list a:hover {
            color: var(--color-white);
            letter-spacing: 5px;
        }

        .nav-close {
            position: absolute;
            top: 2rem;
            right: 4rem;
            background: none;
            border: none;
            color: var(--color-gold);
            cursor: pointer;
            font-family: var(--font-display);
            letter-spacing: 2px;
        }

        /* --- MUSIC TOGGLE --- */
        .music-control {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1001;
            width: 50px;
            height: 50px;
            background: var(--color-emerald);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--color-gold);
            transition: all 0.3s;
        }

        .music-control:hover {
            transform: scale(1.1);
            background: var(--color-gold);
        }

        .music-control span {
            color: var(--color-white);
            font-size: 20px;
        }

        .music-control.muted span {
            color: rgba(255, 255, 255, 0.4);
        }

        /* --- COUNTDOWN --- */
        .countdown-wrap {
            padding: var(--spacing-md) 0;
            background: var(--color-white);
            text-align: center;
        }

        .countdown-grid {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-top: 2rem;
        }

        .countdown-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .countdown-val {
            font-family: var(--font-display);
            font-size: 3rem;
            color: inherit;
            /* Allow parent to control color */
            line-height: 1;
        }

        .countdown-label {
            font-family: var(--font-body);
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: var(--color-gold);
            margin-top: 5px;
        }

        /* --- TIMELINE --- */
        .timeline-section {
            padding: var(--spacing-lg) 0;
            background: var(--color-bg);
            position: relative;
        }

        .timeline-container {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
        }

        .timeline-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 1px;
            background: var(--color-gold);
            opacity: 0.3;
            transform: translateX(-50%);
        }

        .timeline-item {
            width: 100%;
            margin-bottom: 6rem;
            position: relative;
            display: flex;
            align-items: center;
        }

        .timeline-item:nth-child(odd) {
            justify-content: flex-start;
        }

        .timeline-item:nth-child(even) {
            justify-content: flex-end;
        }

        .timeline-dot {
            width: 12px;
            height: 12px;
            background: var(--color-gold);
            border-radius: 50%;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2;
        }

        .timeline-content {
            width: 44%;
            padding: 2.5rem;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(197, 160, 89, 0.3);
            position: relative;
            z-index: 1;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.06);
        }

        .timeline-item:nth-child(odd) .timeline-content {
            text-align: right;
            margin-right: calc(50% + 40px);
            margin-left: 0;
            width: 44%;
        }

        .timeline-item:nth-child(even) .timeline-content {
            text-align: left;
            margin-left: calc(50% + 40px);
            margin-right: 0;
            width: 44%;
        }

        .timeline-time {
            font-family: var(--font-display);
            color: var(--color-gold);
            font-size: 0.9rem;
            letter-spacing: 2px;
            display: block;
            margin-bottom: 0.5rem;
        }

        .timeline-title {
            font-family: var(--font-serif);
            font-size: 1.8rem;
            color: var(--color-emerald);
            margin-bottom: 0.5rem;
        }

        .timeline-desc {
            font-family: var(--font-body);
            font-size: 0.95rem;
            color: #666;
        }

        /* --- VENUE --- */
        .venue-section {
            padding: var(--spacing-lg) 0;
            background: var(--color-white);
        }

        .venue-grid {
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 4rem;
            align-items: center;
        }

        .venue-map-mini {
            width: 100%;
            height: 500px;
            background: #eee;
            border: 1px solid var(--color-gold);
            position: relative;
            overflow: hidden;
        }

        .venue-card {
            padding-right: 2rem;
        }

        .btn-outline {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-top: 2rem;
            padding: 1rem 2rem;
            border: 1px solid var(--color-emerald);
            text-decoration: none;
            color: var(--color-emerald);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 0.8rem;
            transition: 0.3s;
        }

        .btn-outline:hover {
            background: var(--color-emerald);
            color: white;
        }

        /* --- CALENDAR --- */
        .calendar-btn-wrap {
            margin-top: 2rem;
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        /* --- MOBILE REFINEMENTS --- */
        @media (max-width: 768px) {
            .countdown-grid {
                gap: 1.5rem;
            }

            .countdown-val {
                font-size: 2rem;
            }

            .timeline-line {
                left: 20px;
                transform: none;
            }

            .timeline-dot {
                left: 20px;
                transform: none;
            }

            .timeline-content {
                width: 100%;
                text-align: left;
                padding-left: 3rem;
                padding-right: 1rem;
            }

            .timeline-item:nth-child(even) .timeline-content {
                padding-left: 3rem;
            }

            .venue-grid {
                grid-template-columns: 1fr;
            }

            .venue-map-mini {
                height: 300px;
                order: -1;
            }
        }

        /* --- HERO SECTION --- */
        .hero {
            height: 100vh;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-white);
            background: #000;
        }

        .hero-video-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.6;
            pointer-events: none;
        }

        .hero-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom, rgba(10, 42, 26, 0.4), transparent 30%, transparent 70%, rgba(10, 42, 26, 0.6));
        }

        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            max-width: 900px;
        }

        .hero-title {
            font-family: var(--font-display);
            font-size: clamp(3rem, 10vw, 7rem);
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 15px;
            margin: 2rem 0;
            line-height: 1.1;
        }

        .hero-date {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            font-style: italic;
            letter-spacing: 4px;
            opacity: 0.9;
        }

        /* --- EDITORIAL SECTION --- */
        .editorial-section {
            padding: var(--spacing-lg) 0;
            position: relative;
            background: var(--color-white);
        }

        .editorial-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .editorial-img-wrapper {
            position: relative;
            overflow: hidden;
        }

        .editorial-img {
            width: 100%;
            height: 80vh;
            object-fit: cover;
        }

        .editorial-text {
            padding: 4rem;
        }

        .editorial-label {
            font-family: var(--font-display);
            font-size: 0.8rem;
            letter-spacing: 5px;
            color: var(--color-gold);
            text-transform: uppercase;
            margin-bottom: 2rem;
            display: block;
        }

        .editorial-heading {
            font-family: var(--font-serif);
            font-size: clamp(2rem, 5vw, 3.5rem);
            line-height: 1.2;
            margin-bottom: 2rem;
            color: var(--color-emerald);
        }

        .editorial-p {
            font-family: var(--font-body);
            font-size: 1.1rem;
            color: #555;
            line-height: 1.8;
            max-width: 500px;
        }

        /* --- GALLERY (Asymmetric Masonry) --- */
        .gallery-wrap {
            padding: var(--spacing-lg) 0;
            background: var(--color-bg);
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 2rem;
        }

        .gallery-item {
            position: relative;
            overflow: hidden;
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 2s cubic-bezier(0.2, 0, 0.2, 1);
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }

        .gi-1 {
            grid-column: 1 / 6;
            grid-row: span 2;
            height: 70vh;
        }

        .gi-2 {
            grid-column: 6 / 13;
            height: 40vh;
            margin-top: 5rem;
        }

        .gi-3 {
            grid-column: 6 / 10;
            height: 50vh;
        }

        .gi-4 {
            grid-column: 10 / 13;
            height: 30vh;
            align-self: end;
        }

        /* --- RSVP SECTION --- */
        .rsvp-section {
            padding: var(--spacing-lg) 0;
            background: var(--color-emerald);
            color: var(--color-white);
            position: relative;
            overflow: hidden;
        }

        .flower-decor {
            position: absolute;
            width: 600px;
            opacity: 0.1;
            pointer-events: none;
        }

        .flower-top-right {
            top: -100px;
            right: -200px;
            transform: rotate(45deg);
        }

        .flower-bottom-left {
            bottom: -100px;
            left: -200px;
            transform: rotate(-135deg);
        }

        .rsvp-form-card {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(197, 160, 89, 0.2);
            padding: 5rem 3rem;
            backdrop-filter: blur(10px);
            text-align: center;
        }

        .input-group {
            position: relative;
            margin-bottom: 3rem;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            background: transparent;
            border: none;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            color: var(--color-white);
            padding: 1rem 0;
            font-family: var(--font-body);
            font-size: 1.1rem;
            outline: none;
            transition: border-color 0.3s;
            -webkit-appearance: none;
            /* Remove default browser styling */
            -moz-appearance: none;
            appearance: none;
        }

        .input-group input:focus,
        .input-group select:focus {
            border-color: var(--color-gold);
        }

        .input-group select {
            color: white !important;
            cursor: pointer;
        }

        .input-group select option {
            background-color: var(--color-emerald) !important;
            color: var(--color-white) !important;
            padding: 10px;
        }

        .input-group label {
            position: absolute;
            left: 0;
            top: 1rem;
            color: rgba(255, 255, 255, 0.5);
            transition: all 0.3s;
            pointer-events: none;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 0.7rem;
        }

        .input-group input:focus+label,
        .input-group input:not(:placeholder-shown)+label,
        .input-group select:focus+label,
        .input-group select:valid+label {
            top: -1.5rem;
            font-size: 0.6rem;
            color: var(--color-gold);
        }

        .btn-lux {
            background: var(--color-gold);
            color: var(--color-emerald);
            border: none;
            padding: 1.5rem 4rem;
            font-family: var(--font-display);
            font-weight: 700;
            letter-spacing: 4px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.4s;
            position: relative;
            overflow: hidden;
        }

        .btn-lux:hover {
            background: var(--color-white);
            transform: translateY(-3px);
        }

        /* --- FOOTER --- */
        footer {
            padding: var(--spacing-md) 0;
            text-align: center;
            background: var(--color-white);
        }

        .footer-logo {
            font-family: var(--font-display);
            font-size: 3rem;
            color: var(--color-emerald);
            margin-bottom: 1rem;
        }

        .footer-date {
            font-family: var(--font-serif);
            letter-spacing: 5px;
            color: var(--color-gold);
        }

        /* --- MOBILE RESPONSIVE --- */
        @media (max-width: 768px) {
            :root {
                --spacing-lg: 4rem;
                --spacing-md: 3rem;
            }

            header {
                padding: 1rem 1.5rem;
            }

            header.scrolled {
                padding: 0.8rem 1.5rem;
            }

            .hero-title {
                font-size: clamp(2.5rem, 12vw, 4rem);
                letter-spacing: 5px;
                margin: 1.5rem 0;
            }

            .majestic-display {
                font-size: 2rem;
            }

            .majestic-script {
                font-size: 2.5rem;
            }

            .majestic-card {
                padding: 3rem 1.5rem;
                width: 92%;
            }

            .timeline-line {
                left: 20px;
                transform: none;
            }

            .timeline-dot {
                left: 20px;
                transform: none;
            }

            .timeline-content {
                width: calc(100% - 50px) !important;
                margin-left: 50px !important;
                margin-right: 0 !important;
                text-align: left !important;
                padding: 1.5rem !important;
                transform: none !important;
            }

            .timeline-item {
                margin-bottom: 3rem;
            }

            .editorial-grid {
                grid-template-columns: 1fr;
            }

            .editorial-text {
                padding: 2rem 0;
            }

            .gallery-grid {
                display: block;
            }

            .gallery-item {
                margin-bottom: 2rem;
                height: auto !important;
            }

            .gi-2 {
                margin-top: 0;
            }

            .rsvp-form-card {
                padding: 3rem 1.5rem;
            }
        }
    </style>
</head>

<body class="locked">

    <!-- AUDIO -->
    <audio id="music" loop>
        <source
            src="C:\Users\vidun\Downloads\Background Music For Wedding Videos - Romantic Piano Instrumental - Vens Adams.mp3"
            type="audio/mpeg">
    </audio>

    <!-- NEW ENVELOPE OVERLAY -->
    <section class="cssletter" id="envelope-section">
        <div class="envelope">
            <button class="heart" id="openEnvelope" aria-label="Open Envelope">
                <span class="heart-text">OPEN</span>
            </button>
            <div class="envelope-flap"></div>
            <div class="letters">
                <!-- Main Invitation Card (Always on top) -->
                <blockquote class="letter center invitation-card" id="l0" tabindex="0">
                    <p
                        style="font-family: var(--font-serif); font-weight: 600; font-size: 1.2rem; margin-bottom: 1rem;">
                        The Wedding Invitation</p>
                    <p>Together with our families, we request the honor of your presence as we celebrate our marriage.
                    </p>
                    <p style="margin-top: 1rem; font-weight: bold; color: var(--color-gold);">AUGUST 12, 2026</p>
                    <cite>Nayani & Supun</cite>
                </blockquote>

                <!-- Infinite Cards -->
                <blockquote class="letter center" id="l1" tabindex="0">
                    <p>Two hearts, one love.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l2" tabindex="0">
                    <p>Forever starts today.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l3" tabindex="0">
                    <p>Together is a beautiful place to be.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l4" tabindex="0">
                    <p>And so the adventure begins.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l5" tabindex="0">
                    <p>Love is the bridge between two hearts.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l6" tabindex="0">
                    <p>To have and to hold.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l7" tabindex="0">
                    <p>A true love story never ends.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l8" tabindex="0">
                    <p>You are my today and all of my tomorrows.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l9" tabindex="0">
                    <p>Love is composed of a single soul inhabiting two bodies.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l10" tabindex="0">
                    <p>The best is yet to be.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l11" tabindex="0">
                    <p>Happiness is being married to your best friend.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l12" tabindex="0">
                    <p>Once in a while, right in the middle of an ordinary life, love gives us a fairy tale.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l13" tabindex="0">
                    <p>Every love story is beautiful, but ours is my favorite.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l14" tabindex="0">
                    <p>Grow old along with me; the best is yet to be.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l15" tabindex="0">
                    <p>I feel like everything in my life has led me to you.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l16" tabindex="0">
                    <p>In you, I've found the love of my life and my closest, truest friend.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l17" tabindex="0">
                    <p>My heart is and always will be yours.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l18" tabindex="0">
                    <p>We loved with a love that was more than love.</p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l19" tabindex="0">
                    <p>Thinking of you keeps me awake. Dreaming of you keeps me asleep. Being with you keeps me alive.
                    </p>
                    <cite>N & S</cite>
                </blockquote>
                <blockquote class="letter center" id="l20" tabindex="0">
                    <p>If I know what love is, it is because of you.</p>
                    <cite>N & S</cite>
                </blockquote>
            </div>
            <div class="envelope-folds">
                <div class="envelope-left"></div>
                <div class="envelope-right"></div>
                <div class="envelope-bottom"></div>
            </div>
        </div>

        <!-- ENTER BUTTON -->
        <button id="enterSiteBtn" class="enter-site-btn" style="font-size: 0.9rem;">
            Initialize The Wedding
        </button>
    </section>

    <!-- MAIN SITE -->
    <div id="main-site" style="display: none; opacity: 0;">

        <header id="main-header">
            <div class="logo">N & S</div>
            <button class="nav-trigger" id="navToggle">
                <span></span><span></span>
            </button>
        </header>

        <!-- NAVIGATION OVERLAY UI -->
        <div class="nav-overlay" id="navOverlay">
            <button class="nav-close" id="navClose">CLOSE</button>
            <ul class="nav-list">
                <li><a href="#home">Home</a></li>
                <li><a href="#story">Our Story</a></li>
                <li><a href="#events">Events</a></li>
                <li><a href="#location">Venue</a></li>
                <li><a href="#gallery">Gallery</a></li>
                <li><a href="#rsvp">RSVP</a></li>
            </ul>
        </div>

        <main>
            <!-- HERO -->
            <section class="hero" id="home">
                <video autoplay loop muted playsinline class="hero-video-bg">
                    <source src="video.mp4" type="video/mp4">
                </video>
                <div class="hero-overlay"></div>
                <div class="hero-content">
                    <p class="hero-date reveal">August 12th, 2026</p>
                    <h1 class="hero-title reveal">Nayani <span
                            style="font-family: var(--font-script); text-transform: none; letter-spacing: 0;">&</span>
                        Supun</h1>
                    <p class="hero-date reveal" style="font-style: normal; text-transform: uppercase;">Colombo, Sri
                        Lanka</p>
                </div>
            </section>

            <!-- STORY / INVITE -->
            <!-- MAJESTIC INVITATION SECTION -->
            <section class="majestic-invite-section" id="story">
                <div class="majestic-container">
                    <div class="majestic-premium-text reveal">
                        <span class="editorial-label" style="margin-left: 0;">An Elegant Union</span>
                        <h2>A Journey<br>To Forever</h2>
                        <p>We invite you to witness the beginning of our cinematic story. An evening defined by grace,
                            beauty, and the celebration of two hearts becoming one.</p>
                        <div style="margin-top: 2rem;">
                            <img src="imgi_17_mini-logo.png" alt="Monogram" style="width: 50px; opacity: 0.4;">
                        </div>
                    </div>
                    <div class="majestic-card reveal">
                        <img src="Nayani.png" alt="Wedding Invitation">
                    </div>
                </div>
            </section>

            <!-- COOL COUNTDOWN SECTION -->
            <section class="cool-countdown-section">
                <div class="container">
                    <span class="majestic-label" style="color: rgba(255,255,255,0.6);">Counting Down To Forever</span>

                    <div class="cool-countdown-grid" id="countdown">
                        <div class="cool-item">
                            <span class="cool-val countdown-val">00</span>
                            <span class="cool-label">Days</span>
                        </div>
                        <div class="cool-item">
                            <span class="cool-val countdown-val">00</span>
                            <span class="cool-label">Hours</span>
                        </div>
                        <div class="cool-item">
                            <span class="cool-val countdown-val">00</span>
                            <span class="cool-label">Minutes</span>
                        </div>
                        <div class="cool-item">
                            <span class="cool-val countdown-val">00</span>
                            <span class="cool-label">Seconds</span>
                        </div>
                    </div>

                    <div class="calendar-btn-wrap">
                        <a href="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Wedding+of+Nayani+%26+Supun&dates=20260812T040000Z/20260812T170000Z&details=We+are+delighted+to+invite+you+to+our+wedding+celebration.&location=The+Kingsbury+Hotel%2C+Colombo"
                            target="_blank" class="cool-btn">
                            <span class="material-icons-outlined"
                                style="vertical-align: middle; margin-right: 8px;">event</span>
                            Add to Calendar
                        </a>
                    </div>
                </div>
            </section>

            <!-- QUOTE / BREAK -->
            <section
                style="height: 60vh; display: flex; align-items: center; justify-content: center; background: var(--color-emerald);">
                <div class="container" style="text-align: center;">
                    <h2
                        style="font-family: var(--font-serif); color: var(--color-white); font-size: clamp(2rem, 4vw, 3rem); font-style: italic; font-weight: 300; line-height: 1.4;">
                        "To love and be loved is to feel the sun from both sides."
                    </h2>
                    <p
                        style="color: var(--color-gold); margin-top: 2rem; letter-spacing: 4px; font-size: 0.8rem; text-transform: uppercase;">
                        — AUTHUR UNKNOWN</p>
                </div>
            </section>

            <!-- TIMELINE SECTION (Order of Events) -->
            <section class="timeline-section" id="events">
                <div class="container">
                    <span class="editorial-label" style="text-align: center; margin-bottom: 5rem;">Order of
                        Events</span>
                    <div class="timeline-container">
                        <div class="timeline-line"></div>

                        <div class="timeline-item reveal">
                            <div class="timeline-dot"></div>
                            <div class="timeline-content">
                                <span class="timeline-time">09:30 AM</span>
                                <h3 class="timeline-title">Poruwa Ceremony</h3>
                                <p class="timeline-desc">Balmoral Hall, Traditional rites & blessing.</p>
                            </div>
                        </div>

                        <div class="timeline-item reveal">
                            <div class="timeline-dot"></div>
                            <div class="timeline-content">
                                <span class="timeline-time">06:30 PM</span>
                                <h3 class="timeline-title">Cocktail Reception</h3>
                                <p class="timeline-desc">The Lawn, Sunset drinks & canapés.</p>
                            </div>
                        </div>

                        <div class="timeline-item reveal">
                            <div class="timeline-dot"></div>
                            <div class="timeline-content">
                                <span class="timeline-time">08:00 PM</span>
                                <h3 class="timeline-title">Dinner & Dancing</h3>
                                <p class="timeline-desc">Grand Ballroom, A night of celebration.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- VENUE SECTION -->
            <section class="venue-section" id="location">
                <div class="container">
                    <div class="venue-grid">
                        <div class="venue-card reveal">
                            <span class="editorial-label">The Venue</span>
                            <h2 class="editorial-heading">The Kingsbury Hotel</h2>
                            <p class="editorial-p">
                                48 Janadhipathi Mawatha, Colombo 00100, Sri Lanka.<br><br>
                                A majestic oceanside landmark where we will share our vows and celebrate with those we
                                cherish most.
                            </p>
                            <a href="https://goo.gl/maps/YOUR_LINK_HERE" target="_blank" class="btn-outline">
                                <span class="material-icons-outlined">place</span> Get Directions
                            </a>
                        </div>
                        <div class="venue-map-mini reveal">
                            <iframe
                                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3960.612453676175!2d79.841578!3d6.936852!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3ae2591603578205%3A0x673400518385db1b!2sThe%20Kingsbury%20Hotel!5e0!3m2!1sen!2slk!4v1655462524317!5m2!1sen!2slk"
                                width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                        </div>
                    </div>
                </div>
            </section>

            <!-- GALLERY -->
            <section class="gallery-wrap" id="gallery">
                <div class="container">
                    <span class="editorial-label" style="text-align: center; margin-bottom: 4rem;">Gallery
                        editorial</span>
                    <div class="gallery-grid">
                        <div class="gallery-item gi-1 reveal"><img src="imgi_2_1I2A9307.jpg" alt="Moment 1"></div>
                        <div class="gallery-item gi-2 reveal"><img src="imgi_4_1I2A9435.jpg" alt="Moment 2"></div>
                        <div class="gallery-item gi-3 reveal"><img src="imgi_8_1I2A9744.jpg" alt="Moment 3"></div>
                        <div class="gallery-item gi-4 reveal"><img src="imgi_6_1I2A9537.jpg" alt="Moment 4"></div>
                    </div>
                </div>
            </section>

            <!-- RSVP -->
            <section class="rsvp-section" id="rsvp">
                <img src="flower.png" class="flower-decor flower-top-right" alt="">
                <img src="flower1.png" class="flower-decor flower-bottom-left" alt="">

                <div class="container">
                    <div class="rsvp-form-card reveal">
                        <span class="editorial-label">RSVP</span>
                        <h2 class="editorial-heading" style="color: var(--color-white);">Join Our Story</h2>
                        <p style="margin-bottom: 4rem; opacity: 0.7;">Kindly respond by July 1st, 2026</p>

                        <form id="rsvpForm">
                            <div class="input-group">
                                <input type="text" id="name" name="name" required placeholder=" " autocomplete="off">
                                <label for="name">Full Name</label>
                            </div>

                            <div class="input-group">
                                <select id="seats" name="seats" required>
                                    <option value="" disabled selected></option>
                                    <option value="1">1 Guest</option>
                                    <option value="2">2 Guests</option>
                                    <option value="3">3 Guests</option>
                                    <option value="4">4+ Guests</option>
                                </select>
                                <label for="seats">Number of Guests</label>
                            </div>

                            <div style="display: flex; gap: 2rem; justify-content: center; margin: 3rem 0;">
                                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                    <input type="radio" name="attending" value="yes" checked
                                        style="accent-color: var(--color-gold);">
                                    <span style="font-size: 0.8rem; letter-spacing: 1px;">JOYFULLY ACCEPTS</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                    <input type="radio" name="attending" value="no"
                                        style="accent-color: var(--color-gold);">
                                    <span style="font-size: 0.8rem; letter-spacing: 1px;">REGRETFULLY DECLINES</span>
                                </label>
                            </div>

                            <button type="submit" class="btn-lux">Confirm Attendance</button>
                        </form>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <div class="footer-logo">N & S</div>
            <p class="footer-date">12 . 08 . 2026</p>
            <p style="margin-top: 4rem; font-size: 0.7rem; opacity: 0.4; letter-spacing: 2px;">DESIGN BY NOVEXIS STUDIO
            </p>
        </footer>

        <!-- MUSIC CONTROL -->
        <div class="music-control" id="musicToggle">
            <span class="material-icons-outlined" id="musicIcon">volume_up</span>
        </div>
    </div>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        document.addEventListener('DOMContentLoaded', () => {
            // Force scroll to top
            window.scrollTo(0, 0);

            // --- GLOBAL ELEMENTS ---
            const music = document.getElementById('music');
            const site = document.getElementById('main-site');
            const navToggle = document.getElementById('navToggle');
            const navClose = document.getElementById('navClose');
            const navOverlay = document.getElementById('navOverlay');
            const navLinks = document.querySelectorAll('.nav-list a');
            const musicToggle = document.getElementById('musicToggle');
            const musicIcon = document.getElementById('musicIcon');
            const enterSiteBtn = document.getElementById('enterSiteBtn');
            const envelopeSection = document.getElementById('envelope-section');

            // --- 1. NEW ENVELOPE LOGIC ---
            const letters = document.querySelectorAll(".letter");
            const lettersContainer = document.querySelector(".letters");
            let zIndexCounter = 20000;

            const shuffleArray = (array) => {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            };

            const shuffledThings = Array.from(letters).filter(l => !l.classList.contains('invitation-card'));
            shuffleArray(shuffledThings);

            // Add shuffled cards first
            shuffledThings.forEach((letter) => {
                lettersContainer.appendChild(letter);
            });

            // Add invitation card last so it's on top
            const invitationCard = document.querySelector(".invitation-card");
            if (invitationCard) {
                lettersContainer.appendChild(invitationCard);
            }

            letters.forEach((letter) => {

                const startDrag = (e) => {
                    if (e.target.tagName === "BUTTON") return;

                    const isTouch = e.type === "touchstart";
                    if (!isTouch) e.preventDefault(); // Prevent text selection on desktop

                    const pageX = isTouch ? e.touches[0].clientX : e.clientX;
                    const pageY = isTouch ? e.touches[0].clientY : e.clientY;

                    const rect = letter.getBoundingClientRect();

                    letter.style.zIndex = zIndexCounter++;

                    // Freeze at current position and switch to fixed for dragging
                    letter.style.position = "fixed";
                    letter.style.left = `${rect.left}px`;
                    letter.style.top = `${rect.top}px`;
                    letter.style.margin = "0";
                    letter.style.transform = "translate3d(0, 0, 0)";
                    letter.classList.add("dragging");

                    const offsetX = pageX;
                    const offsetY = pageY;

                    const onMove = (moveEvent) => {
                        const curX = isTouch ? moveEvent.touches[0].clientX : moveEvent.clientX;
                        const curY = isTouch ? moveEvent.touches[0].clientY : moveEvent.clientY;

                        const dx = curX - offsetX;
                        const dy = curY - offsetY;

                        // Use translate3d for GPU acceleration and smoothness
                        letter.style.transform = `translate3d(${dx}px, ${dy}px, 0)`;
                    };

                    const onEnd = () => {
                        document.removeEventListener("mousemove", onMove);
                        document.removeEventListener("mouseup", onEnd);
                        document.removeEventListener("touchmove", onMove);
                        document.removeEventListener("touchend", onEnd);
                        letter.classList.remove("dragging");
                    };

                    document.addEventListener("mousemove", onMove);
                    document.addEventListener("mouseup", onEnd);
                    if (isTouch) {
                        document.addEventListener("touchmove", onMove, { passive: false });
                        document.addEventListener("touchend", onEnd);
                    }
                };

                letter.addEventListener("mousedown", startDrag);
                letter.addEventListener("touchstart", startDrag, { passive: false });
            });

            const openEnvelopeBtn = document.querySelector("#openEnvelope");
            if (openEnvelopeBtn) {
                openEnvelopeBtn.addEventListener("click", () => {
                    document.querySelector(".envelope").classList.add("active");
                    // Play music when envelope opens
                    music.volume = 0.3;
                    music.play().catch(() => { });

                    // Show letters and Enter Site Button immediately
                    lettersContainer.classList.add('visible');
                    enterSiteBtn.classList.add('visible');
                });
            }

            // Enter Site Button Logic
            if (enterSiteBtn) {
                enterSiteBtn.addEventListener('click', () => {
                    // Fade out envelope section
                    gsap.to(envelopeSection, {
                        opacity: 0,
                        duration: 1.5,
                        onStart: () => {
                            site.style.display = "block";
                        },
                        onComplete: () => {
                            envelopeSection.style.display = "none";
                            document.body.classList.remove('locked');
                            initScrollAnimations();
                        }
                    });
                    // Fade in main site
                    gsap.to(site, { opacity: 1, duration: 1 });
                });
            }


            // --- 3. SCROLL ANIMATIONS ---
            function initScrollAnimations() {
                // Header Background & Logo Color
                ScrollTrigger.create({
                    start: "top -50", // Earlier transition
                    onEnter: () => {
                        const header = document.getElementById('main-header');
                        if (header) header.classList.add('scrolled');
                    },
                    onLeaveBack: () => {
                        const header = document.getElementById('main-header');
                        if (header) header.classList.remove('scrolled');
                    },
                });

                // Batch reveal items for better performance
                gsap.utils.toArray('.reveal').forEach((el, i) => {
                    gsap.fromTo(el,
                        { y: 60, opacity: 0 },
                        {
                            y: 0,
                            opacity: 1,
                            duration: 1.2,
                            ease: "expo.out",
                            scrollTrigger: {
                                trigger: el,
                                start: "top 90%",
                                toggleActions: "play none none none"
                            },
                            delay: i % 3 * 0.1 // Slight stagger for items in grid
                        }
                    );
                });

                // Parallax Images with a smoother feel
                document.querySelectorAll('.editorial-img').forEach(img => {
                    gsap.to(img, {
                        yPercent: -20,
                        ease: "none",
                        scrollTrigger: {
                            trigger: img,
                            scrub: 1, // Smooth scrolling
                            start: "top bottom",
                            end: "bottom top"
                        }
                    });
                });

                // --- TIMELINE ANIMATIONS (NEW) ---
                gsap.utils.toArray('.timeline-item').forEach((item, i) => {
                    const content = item.querySelector('.timeline-content');
                    const dot = item.querySelector('.timeline-dot');

                    const tl = gsap.timeline({
                        scrollTrigger: {
                            trigger: item,
                            start: "top 85%", // Trigger slightly later
                            toggleActions: "play none none none"
                        }
                    });

                    tl.from(dot, {
                        scale: 0,
                        opacity: 0,
                        duration: 0.8,
                        ease: "elastic.out(1, 0.5)"
                    })
                        .from(content, {
                            x: i % 2 === 0 ? -100 : 100, // More dramatic movement
                            opacity: 0,
                            filter: "blur(10px)",
                            duration: 1.2,
                            ease: "expo.out"
                        }, "-=0.5");
                });

                // --- COUNTDOWN LOGIC ---
                const weddingDate = new Date("August 12, 2026 09:30:00").getTime();
                const updateCountdown = () => {
                    const now = new Date().getTime();
                    const distance = weddingDate - now;
                    if (distance < 0) return;

                    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                    const vals = document.querySelectorAll('.countdown-val');
                    if (vals.length >= 4) {
                        vals[0].innerText = days.toString().padStart(2, '0');
                        vals[1].innerText = hours.toString().padStart(2, '0');
                        vals[2].innerText = minutes.toString().padStart(2, '0');
                        vals[3].innerText = seconds.toString().padStart(2, '0');
                    }
                };
                setInterval(updateCountdown, 1000);
                updateCountdown();
            }

            // --- 4. MUSIC CONTROL ---
            if (musicToggle) {
                musicToggle.addEventListener('click', () => {
                    if (music.paused) {
                        music.play();
                        musicIcon.innerText = "volume_up";
                        musicToggle.classList.remove('muted');
                    } else {
                        music.pause();
                        musicIcon.innerText = "volume_off";
                        musicToggle.classList.add('muted');
                    }
                });
            }

            // --- 5. NAVIGATION LOGIC ---
            if (navToggle) {
                navToggle.addEventListener('click', () => {
                    navOverlay.classList.add('active');
                });
            }

            if (navClose) {
                navClose.addEventListener('click', () => {
                    navOverlay.classList.remove('active');
                });
            }

            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    navOverlay.classList.remove('active');
                });
            });

            // --- 6. RSVP FORM ---
            const form = document.getElementById('rsvpForm');
            if (form) {
                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const btn = form.querySelector('button');
                    // const originalText = btn.innerText; // Unused variable
                    btn.innerText = "SENDING...";
                    btn.disabled = true;

                    // SheetDB logic integration
                    const formData = new FormData(form);
                    fetch('https://sheetdb.io/api/v1/5u9yrdv1rr0ux', {
                        method: 'POST',
                        body: formData,
                    })
                        .then(() => {
                            btn.innerText = "SEE YOU THERE!";
                            btn.style.background = "#fff";
                            btn.style.color = "#0A2A1A";
                            form.reset();
                        })
                        .catch(() => {
                            btn.innerText = "ERROR - TRY AGAIN";
                            btn.disabled = false;
                        });
                });
            }
        });
    </script>
</body>

</html>